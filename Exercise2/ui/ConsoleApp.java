package ui;
import factory.TaskFactory;import model.Task;import observer.ConsoleObserver;import service.ScheduleManager;import java.util.*;
public class ConsoleApp{private static final Scanner sc=new Scanner(System.in);private static final ScheduleManager mgr=ScheduleManager.getInstance();static{mgr.addObserver(new ConsoleObserver());}private static void menu(){System.out.println("\n--Astronaut Scheduler--\n1.Add\n2.Remove\n3.View\n4.Mark Completed\n0.Exit");}
public static void main(String[] a){boolean run=true;while(run){menu();String ch=sc.nextLine();switch(ch){case"1":add();break;case"2":rem();break;case"3":view();break;case"4":mark();break;case"0":run=false;break;default:System.out.println("Invalid");}}}
static void add(){try{System.out.print("Desc: ");String d=sc.nextLine();System.out.print("Start HH:MM: ");String s=sc.nextLine();System.out.print("End HH:MM: ");String e=sc.nextLine();System.out.print("Priority: ");String p=sc.nextLine();Task t=TaskFactory.create(d,s,e,p);if(mgr.addTask(t))System.out.println("Added");}catch(Exception ex){System.out.println("Err: "+ex.getMessage());}}static void rem(){System.out.print("Desc to remove: ");String d=sc.nextLine();Optional<Task> f=mgr.findByDesc(d);if(f.isPresent()){mgr.removeTask(f.get().getId());System.out.println("Removed");}else System.out.println("Not found");}static void view(){List<Task> l=mgr.listSorted();if(l.isEmpty())System.out.println("No tasks");else l.forEach(System.out::println);}static void mark(){System.out.print("Desc to mark: ");String d=sc.nextLine();Optional<Task> f=mgr.findByDesc(d);if(f.isPresent()){f.get().setCompleted(true);System.out.println("Done");}else System.out.println("Not found");}}
